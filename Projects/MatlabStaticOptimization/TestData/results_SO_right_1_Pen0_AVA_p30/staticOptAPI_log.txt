

Beginning Optimization for walking_baseline1 from 0.40 to 1.52 seconds. 


Optimizing t=0.400s
SQP optimizer had an issue - output state was 0
Trying IP instead
This step took 5.1193s. Exitflag was 2.

Optimizing t=0.420s
This step took 0.87682s. Exitflag was 2.

Optimizing t=0.440s
{Operation terminated by user during <a href="matlab:matlab.internal.language.introspective.errorDocCallback('DynamicsConstraint_momentMatching')" style="font-weight:bold">DynamicsConstraint_momentMatching</a>

In <a href="matlab:matlab.internal.language.introspective.errorDocCallback('StaticOptimizationAPIVectorized>@(coeffs0)DynamicsConstraint_momentMatching(coeffs0,params)', 'C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\StaticOptimizationAPIVectorized.m', 724)" style="font-weight:bold">StaticOptimizationAPIVectorized>@(coeffs0)DynamicsConstraint_momentMatching(coeffs0,params)</a> (<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\StaticOptimizationAPIVectorized.m',724,0)">line 724</a>)
    nonlcon = @(coeffs0) DynamicsConstraint_momentMatching(coeffs0,params) ;
In finDiffEvalAndChkErr

In finitedifferences

In computeFinDiffGradAndJac

In sqpInterface

In <a href="matlab:matlab.internal.language.introspective.errorDocCallback('fmincon', 'C:\Program Files\MATLAB\R2022a\toolbox\shared\optimlib\fmincon.m', 882)" style="font-weight:bold">fmincon</a> (<a href="matlab: opentoline('C:\Program Files\MATLAB\R2022a\toolbox\shared\optimlib\fmincon.m',882,0)">line 882</a>)
    [X,FVAL,EXITFLAG,OUTPUT,LAMBDA,GRAD,HESSIAN] = sqpInterface(funfcn,X,full(A),full(B),full(Aeq),full(Beq), ...
In <a href="matlab:matlab.internal.language.introspective.errorDocCallback('StaticOptimizationAPIVectorized', 'C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\StaticOptimizationAPIVectorized.m', 730)" style="font-weight:bold">StaticOptimizationAPIVectorized</a> (<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\StaticOptimizationAPIVectorized.m',730,0)">line 730</a>)
        [coeffsFinal,fval,exitflag,output] = fmincon(@(coeffs0) CostFunction(coeffs0,params), ...
In <a href="matlab:matlab.internal.language.introspective.errorDocCallback('MAIN_StaticOptimization_CMBBE_withTestData', 'C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\MAIN_StaticOptimization_CMBBE_withTestData.m', 123)" style="font-weight:bold">MAIN_StaticOptimization_CMBBE_withTestData</a> (<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\MAIN_StaticOptimization_CMBBE_withTestData.m',123,0)">line 123</a>)
        StaticOptimizationAPIVectorized(INPUTS) ; % Run StaticOptimizationAPI} 
MAIN_StaticOptimization_CMBBE_withTestData
if system_dependent('IsDebugMode')==1, dbcont; end
if system_dependent('IsDebugMode')==1, dbstep in; end
<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\MAIN_StaticOptimization_CMBBE_withTestData.m',43,1)">43  </a>INPUTS.appendActuators = true ; % Append reserve actuators at all coordinates?
savedir = [baseDir fp 'resilts_figures_parent'];
plotReuslts_CMBBE_withTestData(savedir)
[Warning: Directory already exists.] 
[> In <a href="matlab:matlab.internal.language.introspective.errorDocCallback('plotReuslts_CMBBE_withTestData', 'C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\plotReuslts_CMBBE_withTestData.m', 16)" style="font-weight:bold">plotReuslts_CMBBE_withTestData</a> (<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\plotReuslts_CMBBE_withTestData.m',16,0)">line 16</a>)
In <a href="matlab:matlab.internal.language.introspective.errorDocCallback('MAIN_StaticOptimization_CMBBE_withTestData', 'C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\MAIN_StaticOptimization_CMBBE_withTestData.m', 43)" style="font-weight:bold">MAIN_StaticOptimization_CMBBE_withTestData</a> (<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\MAIN_StaticOptimization_CMBBE_withTestData.m',43,0)">line 43</a>)] 
<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\plotReuslts_CMBBE_withTestData.m',98,1)">98  </a>            try % in child
if system_dependent('IsDebugMode')==1, dbcont; end
<a href="matlab: opentoline('C:\Git\MSKmodelling\Projects\MatlabStaticOptimization\Utilities\plotReuslts_CMBBE_withTestData.m',214,1)">214 </a>    [ha, pos,FirstCol,LastRow,LastCol] = tight_subplotBG(length(joints));
[ha, pos,FirstCol,LastRow,LastCol] = tight_subplotBG(length(joints));
    last_plot_not_contact_force = 0;
    Plot_colors = colorBG(0,length(penalties));
    for iJoint = 1:length(joints)
        for iPen = 1:length(penalties)
            axes(ha(last_plot_not_contact_force+iJoint))

            JointName = joints{iJoint};
            force_data = contactForces.(['Pen_' penalties{iPen}]).(JointName);

            plotShadedSD(mean(force_data,2),std(force_data,0,2), Plot_colors(iPen,:));
            title(JointName,'Interpreter','none')
            if any(iJoint == FirstCol)
                ylabel('Contact force (N)')
            end
            if any(iJoint == LastRow)
                xlabel('Gait cycle(%)')
            end
        end
    end

    % appearance
    ax = gca;
    lg = legend(ax.Children(2:2:end),flip(penalties));
    lg.Interpreter = "none";

    tight_subplot_ticks(ha,LastRow,0)

    mmfn_inspect
figure;plot(contactForces.Pen_0.hip_x,'DisplayName','contactForces.Pen_0.hip_x')
MATLAB has experienced a low-level graphics error, and may not have drawn correctly.
Read about what you can do to prevent this issue at <a href="matlab:opengl('problems')">Resolving Low-Level Graphics Issues</a> then restart MATLAB.
To share details of this issue with MathWorks technical support,
please include <a href="file:C:\Users\Biomech\AppData\Local\Temp\jogl.ex.16460">this file</a> with your service request.
clc
muscleForces
muscleForces = 
  <a href="matlab:helpPopup struct" style="font-weight:bold">struct</a> with fields:

       Pen_0: [1×1 struct]
      Pen_10: [1×1 struct]
     Pen_100: [1×1 struct]
     Pen_500: [1×1 struct]
    Pen_1000: [1×1 struct]
if system_dependent('IsDebugMode')==1, dbquit all; end
[muscleForces] = sumMuscleForces(muscleForces)
{Unrecognized function or variable 'muscleForces'.} 
